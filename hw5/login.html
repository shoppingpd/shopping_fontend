<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>會員登入 / 註冊 / 重設密碼</title>

<!-- flatpickr 日期選擇器 CSS & JS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/zh_tw.js"></script>

<style>
  body {
    font-family: 'Helvetica Neue', Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding-top: 50px;
  }

  .container {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    width: 80vw;
    max-width: 800px;
    padding: 25px;
    box-sizing: border-box;
  }

  h1 {
    text-align: center;
    font-size: 1.6rem;
    margin-bottom: 20px;
    color: #333;
  }

  .form-group { margin-bottom: 15px; }
  label {
    display: block;
    font-size: 0.875rem;
    color: #555;
    margin-bottom: 5px;
  }

  input[type="text"], input[type="password"], input[type="email"], input[type="tel"], select {
    width: 100%;
    padding: 10px;
    font-size: 1rem;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 4px;
    background-color: rgba(255,255,255,0.8);
    box-sizing: border-box;
    outline: none;
    transition: border 0.3s;
  }

  input:focus, select:focus { border-color: #007bff; }

  .flex-row {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  .flex-row .form-group { flex: 1; margin-bottom: 0; }

  button {
    width: 100%;
    padding: 12px;
    font-size: 1rem;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 15px;
  }
  button:hover { background-color: #0056b3; }

  .toggle-link, .forgot-password {
    display: block;
    text-align: center;
    margin-top: 10px;
    font-size: 0.875rem;
    color: #007bff;
    text-decoration: none;
  }
  .toggle-link:hover, .forgot-password:hover { text-decoration: underline; }

  .password-strength {
    font-size: 0.8rem;
    margin-top: 5px;
  }
  .password-tip {
    font-size: 0.8rem;
    color: #666;
    margin-top: 3px;
  }
  .weak { color: red; }
  .medium { color: orange; }
  .strong { color: green; }

  .error {
    color: red;
    font-size: 0.85rem;
    margin-top: 5px;
  }

  @media screen and (max-width: 700px) {
    .container { width: 90vw; }
    .flex-row { flex-direction: column; }
  }
</style>
</head>
<body>

<!-- 登入 -->
<div class="container" id="login-container">
  <h1>會員登入</h1>
  <form id="login-form">
    <div class="form-group">
      <label for="login-id">電子郵件或手機號碼</label>
      <input type="text" id="login-id" name="login-id" placeholder="請輸入電子郵件或手機號碼" required>
    </div>
    <div class="form-group">
      <label for="login-password">密碼</label>
      <input type="password" id="login-password" name="password" placeholder="請輸入密碼" required>
      <div id="login-error" class="error"></div>
    </div>
    <label><input type="checkbox" id="remember"> 記住帳號</label>
    <button type="submit">登入</button>
    <a href="#" class="forgot-password">忘記密碼？</a>
  </form>
  <a href="#" class="toggle-link" id="switch-to-register">還沒有帳號？註冊</a>
</div>

<!-- 註冊 -->
<div class="container" id="register-container" style="display: none;">
  <h1>註冊帳號</h1>
  <form id="register-form">
    <div class="form-group">
      <label for="full-name">姓名</label>
      <input type="text" id="full-name" name="full-name" placeholder="請輸入姓名" required>
    </div>

    <div class="flex-row">
      <div class="form-group">
        <label for="birthdate">出生年月日</label>
        <input type="text" id="birthdate" name="birthdate" placeholder="請選擇日期" required>
      </div>
      <div class="form-group">
        <label for="gender">性別</label>
        <select id="gender" name="gender" required>
          <option value="">請選擇</option>
          <option value="male">男</option>
          <option value="female">女</option>
          <option value="other">其他</option>
        </select>
      </div>
    </div>

    <div class="form-group">
      <label for="phone">手機號碼</label>
      <input type="tel" id="phone" name="phone" placeholder="請輸入手機號碼" required pattern="09\d{8}">
    </div>

    <div class="form-group">
      <label for="new-email">電子郵件</label>
      <input type="email" id="new-email" name="email" placeholder="請輸入電子郵件" required>
    </div>

    <div class="flex-row">
      <div class="form-group">
        <label for="new-password">密碼</label>
        <input type="password" id="new-password" name="password" placeholder="請輸入密碼" required>
        <div class="password-tip">密碼需包含英文與數字，至少 6 碼</div>
        <div id="password-strength" class="password-strength"></div>
      </div>
      <div class="form-group">
        <label for="confirm-password">確認密碼</label>
        <input type="password" id="confirm-password" name="confirm-password" placeholder="請確認密碼" required>
      </div>
    </div>

    <button type="submit">註冊</button>
  </form>
  <a href="#" class="toggle-link" id="switch-to-login">已經有帳號？登入</a>
</div>

<!-- 重設密碼 -->
<div class="container" id="reset-container" style="display: none;">
  <h1>重設密碼</h1>
  <form id="reset-form">
    <div class="form-group">
      <label for="reset-id">電子郵件或手機號碼</label>
      <input type="text" id="reset-id" placeholder="請輸入註冊帳號" required>
    </div>
    <div class="form-group">
      <label for="reset-password">新密碼</label>
      <input type="password" id="reset-password" placeholder="輸入新密碼" required>
      <div class="password-tip">密碼需包含英文與數字，至少 6 碼</div>
      <div id="reset-password-strength" class="password-strength"></div>
    </div>
    <div class="form-group">
      <label for="reset-confirm">確認新密碼</label>
      <input type="password" id="reset-confirm" placeholder="請再次輸入新密碼" required>
    </div>
    <button type="submit">重設密碼</button>
  </form>
  <a href="#" class="toggle-link" id="back-to-login">返回登入</a>
</div>

<script>
  // ==== 切換登入/註冊 ====
  const switchToRegister = document.getElementById('switch-to-register');
  const switchToLogin = document.getElementById('switch-to-login');
  const loginContainer = document.getElementById('login-container');
  const registerContainer = document.getElementById('register-container');

  switchToRegister.addEventListener('click', e => {
    e.preventDefault();
    loginContainer.style.display = 'none';
    registerContainer.style.display = 'block';
  });
  switchToLogin.addEventListener('click', e => {
    e.preventDefault();
    registerContainer.style.display = 'none';
    loginContainer.style.display = 'block';
  });

  // ==== flatpickr 日期選擇器 ====
  flatpickr("#birthdate", {
    dateFormat: "Y/m/d",
    locale: "zh_tw",
    maxDate: "today",
    defaultDate: "2000-01-01"
  });

  // ==== 註冊密碼強度 ====
  const newPassword = document.getElementById('new-password');
  const passwordStrength = document.getElementById('password-strength');

  newPassword.addEventListener('input', () => {
    const val = newPassword.value;
    let strength = '', cls = '';
    if(val.length < 6) { strength = '弱'; cls = 'weak'; }
    else if(/[A-Za-z]/.test(val) && /\d/.test(val)) { strength = '中'; cls = 'medium'; }
    if(/[!@#$%^&*]/.test(val) && val.length >= 10) { strength = '強'; cls = 'strong'; }
    passwordStrength.textContent = `密碼強度：${strength}`;
    passwordStrength.className = `password-strength ${cls}`;
  });

  // ==== 重設密碼強度 ====
  const resetPassword = document.getElementById('reset-password');
  const resetStrength = document.getElementById('reset-password-strength');

  resetPassword.addEventListener('input', () => {
    const val = resetPassword.value;
    let strength = '', cls = '';
    if(val.length < 6) { strength = '弱'; cls = 'weak'; }
    else if(/[A-Za-z]/.test(val) && /\d/.test(val)) { strength = '中'; cls = 'medium'; }
    if(/[!@#$%^&*]/.test(val) && val.length >= 10) { strength = '強'; cls = 'strong'; }
    resetStrength.textContent = `密碼強度：${strength}`;
    resetStrength.className = `password-strength ${cls}`;
  });

  // ==== 註冊提交 ====
  const registerForm = document.getElementById('register-form');
  registerForm.addEventListener('submit', e => {
    e.preventDefault();
    const pw = newPassword.value;
    const confirm = document.getElementById('confirm-password').value;
    if(pw !== confirm) { alert('密碼與確認密碼不一致'); return; }
    alert('註冊成功！');
    registerForm.reset();
    passwordStrength.textContent = '';
  });

  // ==== 登入驗證 ====
  const loginForm = document.getElementById('login-form');
  const loginError = document.getElementById('login-error');
  const remember = document.getElementById('remember');

  const validAccount = { id: 'test@gmail.com', password: '123456' };

  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    const id = document.getElementById('login-id').value;
    const pw = document.getElementById('login-password').value;

    if(id === validAccount.id && pw === validAccount.password) {
      loginError.textContent = '';
      alert(`登入成功！歡迎 ${id}`);
    } else {
      loginError.textContent = '帳號或密碼錯誤，請重新輸入';
    }

    if(remember.checked) localStorage.setItem('savedId', id);
    else localStorage.removeItem('savedId');
  });

  // ==== 自動填入記住的帳號 ====
  const savedId = localStorage.getItem('savedId');
  if(savedId) document.getElementById('login-id').value = savedId;

  // ==== 忘記密碼切換 ====
  const forgotLink = document.querySelector('.forgot-password');
  const resetContainer = document.getElementById('reset-container');
  const backToLogin = document.getElementById('back-to-login');

  forgotLink.addEventListener('click', e => {
    e.preventDefault();
    loginContainer.style.display = 'none';
    resetContainer.style.display = 'block';
  });

  backToLogin.addEventListener('click', e => {
    e.preventDefault();
    resetContainer.style.display = 'none';
    loginContainer.style.display = 'block';
  });

  // ==== 重設密碼提交 ====
  const resetForm = document.getElementById('reset-form');
  resetForm.addEventListener('submit', e => {
    e.preventDefault();
    const id = document.getElementById('reset-id').value;
    const pw = resetPassword.value;
    const confirm = document.getElementById('reset-confirm').value;
    if(pw !== confirm) { alert('密碼與確認密碼不一致'); return; }

    // TODO: 這裡可改成呼叫後端 API 更新密碼
    alert(`帳號 ${id} 的密碼已重設成功！`);
    resetForm.reset();
    resetStrength.textContent = '';
    resetContainer.style.display = 'none';
    loginContainer.style.display = 'block';
  });
</script>

</body>
</html>

